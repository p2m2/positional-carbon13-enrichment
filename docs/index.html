<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>The Scala.js Tutorial</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style media = "screen">
        body {
            background: #F5F5F5;
        }
        h1,h2 {
             text-align: center;
        }
        .canvasChart {
            text-align: center;
            width: 450px;
        }
        .gridCanvas {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            grid-gap: 10px;
        }
        .centered-element{
            display: flex;
            justify-content: center;
            align-items: center;
        }
        footer {
          text-align: center;
          padding: 3px;
          //background-color: Grey;
          color: grey;
        }
        textarea {
          white-space: pre;
        }
    </style>
  </head>
  <header>
    <a href="https://github.com/p2m2/" target="_blank"><img src="https://img.shields.io/badge/github-p2m2-blue.svg"/></a>
  </header>
  <body>

  <h1><a href="javascript:window.location.reload(true)">Calculations of <sup>13</sup>C-Positional Enrichments</a></h1>
  <div id="header">
    <p>
    <h2>Method</h2>
    <sup>13</sup>C-positional enrichments were calculated by combining mean <sup>13</sup>C enrichments
    of several mass fragments that shared part of the carbon backbone from the same TMS
    derivative. This tool computes these <sup>13</sup>C-positional enrichments directly from the outputs of our
    <sup>13</sup>C-processing method using the <a href="https://isocor.readthedocs.io/en/latest/" target="_blank">IsoCor</a> output format.
    <br/>
    For a precise description of the method, refer to the publication
    <a href=""><i>"Evaluation of GC/MS-Based <sup>13</sup>C-Positional
      Approaches for TMS Derivatives of Organic and Amino Acids and Application to Plant
      - https://doi.org/10.3390/metabo13040466<sup>13</sup>C-Labeled Experiments"</i></a>
    </p>

    <h2>Metabolite name format</h2>
    <p>The name of the metabolite must follow the format <i>MetaboliteName<b>C</b>&#60;x&#62<b>C</b>&#60;y&#62;&#60;fragment&#62;</i>
      or <i>MetaboliteName<b>C</b>&#60;x&#62&#60;fragment&#62;</i></p>
    <pre>
        sample	metabolite	derivative	isotopologue	isotopic_inchi	area	corrected_area	isotopologue_fraction	residuum	mean_enrichment
        Prot13C_1_16	<b>GlycineC2m174</b>	2TMS	0	/a(C1+0)	410680.0	518131.0969722705	0.5205891530191978	0.0	0.47941084698080205
      </pre>
    <h2>Calculation rules</h2>
    <p style="color:blue;text-align:center">
      <i>The rules must follow the following form (The isotope A is built from the Metabolite B,C,D ...).
        Metabolite refers to the label in the IsoCor file
        <br/>
        [Metabolite] -> A -> B, C, D,...
        <br/>
        If the rules are not defined for a compound, all combinations of calculations are proposed.</i>
    </p>
    <div class="centered-element">
      <textarea id="positionalEnrichmentDependencies" cols="100" rows="10"></textarea>
    </div>

  </div>
  <div  id="display">
    <h2>Input file (IsoCor)</h2>
    <div id="positionInputFile" class="centered-element" ></div>
    <!-- https://www.chartjs.org/docs/latest/getting-started/ -->
    <div id="positionalCarbonChartCanvas">
    </div>
    <br/>
  </div>
    <!-- Include Scala.js compiled code -->
    <script type="text/javascript" src="positional-carbon13-enrichment-opt-bundle.js"></script>
  </body>
    <footer>
      <a href="https://www6.inrae.fr/p2m2" target="_blank"><img src="p2m2.png" width="120"></a>
      <a href="https://www.metabohub.fr/" target="_blank"><img src="metabohub.png" width="120"></a>
    </footer>

</html>

